<html>
<head>
  <title>Substance &middot; Surface</title>

  <link href='http://fonts.googleapis.com/css?family=Merriweather:400,700,300,900' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="stylesheets/surface.css">

  <script type="text/javascript" src="lib/underscore.js"></script>
  <script type="text/javascript" src="lib/jquery-min.js"></script>
  <script type="text/javascript" src="lib/keymaster.js"></script>
  <script type="text/javascript" src="surface.js"></script>

  <script type="text/plain" name="content">Hello World!
BlaX</script>

  <script>
    $(function() {
      var surface = new Substance.Surface({
        el: '.content',
        content: $('script[name=content]').text(),
        annotations: [
          { id: "annotation-1", type: "em", pos: [0,3] },
          { id: "annotation-2", type: "str", pos: [8,4] },
          { id: "annotation-3", type: "comment", pos: [13,3] }
        ]
      });


      surface.on('content:changed', function(content, prevContent) {
        console.log('updated text from', prevContent, 'to: ', content);
      });

      function log(message) {
        $('.debug-console').append($('<div class="log-entry">'+message+'</div>'))
      }

      $('a.show-selection').click(function(sel) {
        log("SELECTION: "+ surface.selection());
      });

      $('a.get-content').click(function(sel) {
        log("CONTENT: <br/><pre>"+ surface.getContent()+"</pre>");
      });

      $('a.set-selection').click(function(sel) {
        surface.select(17);
        // surface.deleteRange([0, 3]);
      });

      $('a.delete-selection').click(function(sel) {
        surface.deleteRange([0, 3]);
      });
    });
  </script>

</head>
<body>
  <div id="content" class="content" spellcheck="false" contenteditable="true"></div>

  <div class="debug">
    <h1>Actions</h1>
    <div class="actions">
      <a href="#" class="show-selection">Get Selection</a>
      <a href="#" class="get-content">Get Content</a>
      <a href="#" class="set-selection">Set selection</a>
      <a href="#" class="delete-selection">Delete Range [0..3]</a>
    </div>
    <div class="debug-console">
    </div>
  </div>
</body>
